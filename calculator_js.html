<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="Generator" content="EditPlus®">
		<meta name="Author" content="">
		<meta name="Keywords" content="">
		<meta name="Description" content="">
		<title>计算器-JS</title>
		<!--
			JS代码部分主要是基本的点击事件.
			要注意实际计算器中小数点点击多次只能输入一个.
		-->
		<style>
		*{
			margin:0;
			padding:0;
		}
		body{
			background:#ffc;
			font-size:12px;
			font-family: "Microsoft YaHei";
			color:#666;
		}
		ul,ol{
			list-style:none;
		}
		.cac{
			width:410px;
			background:#399;
			margin:50px auto;	
		}
		.cac .c_title{
			font-size:16px;
			color:#000;
			padding:10px 0 10px 10px;
			cursor:move;
		}
		.cac .c_show .c_text{
			width:390px;
			height:42px;
			font-size:34px;
			color:#999;
			border:none;
			outline:none;
			text-align:right;
			padding-right:20px;
			line-height:25px;
		}
		/*
			.cac .c_key{
				width:410px;
				height:250px;
			}
		*/
		.cac .c_key ul{
			border:1px solid #fff;
		}
		.cac .c_key ul li{
			border:1px solid #fff;
			width:69px;
			height:50px;
			font-size:25px;
			margin:5px;
			float:left;
			background:#cc3;
			line-height:50px;
			cursor:pointer;
			text-align:center;
		}
		.cac .c_key .c_tool{
			background:#39c;
		}
		.clear{
			clear:both;
		}
		</style>
	</head>
	<body>
		<div class="cac">
			<div class="c_title">计算器</div>
			<div class="c_show">
				<input type="text" class="c_text" value="0" onfocus="this.blur();" id="result"/>
				<!--onfocus="this.blur();"作用是使键盘无法输入-->
			</div>
			<div class="c_key">
				<ul>
					<!--每个按钮都要添加onclick点击事件,不然按钮不能用-->
					<li onclick="command(7);">7</li>
					<li onclick="command(8);">8</li>
					<li onclick="command(9);">9</li>
					<li class="c_tool"><-</li>
					<li class="c_tool" onclick="clearzero('j');">C</li>
					<li onclick="command(4);">4</li>
					<li onclick="command(5);">5</li>
					<li onclick="command(6);">6</li>
					<li class="c_tool" onclick="tools('*','g');">×</li>
					<li class="c_tool" onclick="tools('/','g');">÷</li>
					<li onclick="command(1);">1</li>
					<li onclick="command(2);">2</li>
					<li onclick="command(3);">3</li>
					<li class="c_tool" onclick="tools('+','g');">+</li>
					<li class="c_tool" onclick="tools('-','g');">-</li>
					<li onclick="command(0);">0</li>
					<li onclick="command(00);">00</li>
					<li onclick="dot('g');">.</li>
					<li class="c_tool" onclick="tools('%','g');">%</li>
					<li class="c_equ" onclick="equal('j');">=</li>
					<div class="clear"></div>
				</ul>
			</div>
		</div>
		<script>
			/*
				1.数字显示,数字拼接
				2.点击操作符
				3.点击数字
				4.获取结果
				5.不能连续输入
			*/

			//点击按钮执行操作
			var resultDom = document.getElementById("result");	//var 是定义变量
			var operate = true;									//定义一个变量,防止运算符的连续操作
			var xop = true;										//定义一个变量,防止小数点可以连续输出
			function command(num){
				if (needclear==1)
				{
					needclear=0;
					resultDom.value="";
				}
				var str=resultDom.value;//获取当前文本框的值
				str=(str=="0"?"":str);//若为0则str为空字符,若不为零,则str为当前文本框的值
				resultDom.value=str+num;//字符串拼接
				operate=true;
				play(num);//调用按键声音函数
			}

			//清空
			function clearzero(m){
				resultDom.value=0;
				play(m);//调用按键声音函数
			}

			//计算等号
			var needclear=0;
			function equal(m){
				needclear=1;
				var result=resultDom.value.toString();
				var r=eval(result);//计算 JavaScript 字符串
				resultDom.value=r;
				play(m);//调用按键声音函数
			}

			//小数点
			function dot(m){
				if (xop)
				{	//对变量进行判断输出
					var num=resultDom.value.toString();
					num+=".";
					resultDom.value=num;
					xop=true;
				}
				play(m);//调用按键声音函数
			}

			//点击操作符
			function tools(op,m){
				if (operate)
				{	//对运算符进行判断输出
					var num=resultDom.value;
					num=(num=="0"?"":num);
					resultDom.value=num+op;
					operate=false;//防止运算符的连续操作
				}
				play(m);//调用按键声音函数
			}

			//按键声音
			function play(num){
				var audioDom=document.getElementById("audio");
				audioDom.innerHTML="<embed src='wav/'+num+'.wav' width='0' height='0'></embd>"//wav是声音素材的文件夹名称
			}
		</script>
	</body>
</html>
