<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="Generator" content="EditPlus®">
		<meta name="Author" content="">
		<meta name="Keywords" content="">
		<meta name="Description" content="">
		<title>任务六：基础JavaScript练习（三）</title>
		<!--
			基于任务四进行升级
				将新元素输入框从input改为textarea
				允许一次批量输入多个内容，格式可以为数字、中文、英文等，
				可以通过用回车,逗号(全角半角均可),顿号,空格(全角半角、Tab等均可)等符号作为不同内容的间隔

				增加一个查询文本输入框，和一个查询按钮，
					当点击查询时，将查询词在各个元素内容中做模糊匹配，将匹配到的内容进行特殊标识，如文字颜色等。
					举例，内容中有abcd，查询词为ab或bc，则该内容需要标识
				需要用到正则表达式 var reg=new RegExp(key,'gi');//全局搜索不区分大小写
		-->
		<style>
		*{
			margin:0;
			padding:0;
			outline:none;
			box-sizing:border-box;
		}
		ul{
			list-style:none;
		}
		#container{
			width:50%;
			margin:10px auto;
			padding:20px;
			border:1px solid #ccc;
		}
		#container textarea{
			padding:10px;
			width:80px;
			resize:none;
		}
		#container input[type="button"]{
			border:1px solid #222;
			border-radius:5px;
			background:#fff;
			width:60px;
			cursor:pointer;
			margin:0 10px;
		}
		#container ul{
			width:100%;
			margin-top:20px;
			overflow:hidden;
		} 
		#container li{
			float:left;
			width:40px;
			height:40px;
			background:#f00;
			color:#fff;
			text-align:center;
			line-height:40px;
			margin:0 20px 20px 0;
			cursor:pointer;
		}
		</style>
	</head>
	<body>
		<div id="container">
			<textarea id="content"></textarea>
			<input type="button" value="左侧入" onclick="insertFromLeft()"/>
			<input type="button" value="右侧入" onclick="insertFromRight()"/>
			<input type="button" value="左侧出" onclick="removeFromLeft()"/>
			<input type="button" value="右侧出" onclick="removeFromRight()"/>
			<ul id="list">
				<li class="thisNode">10</li>
				<li class="thisNode">3</li>
				<li class="thisNode">7</li>
				<li class="thisNode">12</li>
				<li class="thisNode">11</li>
				<li class="thisNode">13</li>
			</ul>
			<input type="text" placeholder="请输入要查询的内容" id="key"/>
			<input type="button" value="查询" onclick="queryFun()"/>
		</div>
		<script>
			//左侧插入
			function insertFromLeft(){
				var text=document.getElementById("content").value;//获取文本框的值
				if(text==""){
					alert("请输入内容");
				}else{
					var oList=document.getElementById("list");//获取ul对象
					var oLi=document.createElement("li");//创建li元素
					oLi.innerHTML=text;
					oLi.setAttribute("class","thisNode");//为节点增加class属性
					if(oList.firstChild){
						oList.insertBefore(oLi,oList.firstChild);//插入到第一个li的前面
					}else{
						oList.appendChild(oLi);//将创建的li添加到ul尾部
					}
					document.getElementById("content").value="";//清空文本框的值
					var nodeNum=document.getElementsByClassName("thisNode");
					for(var i=0;i<nodeNum.length;i++){
							nodeNum[i].onclick=function(){
							this.parentNode.removeChild(this);
						};
					}
				}
			}
			//右侧插入
			function insertFromRight(){
				var text=document.getElementById("content").value;//获取文本框的值
				if(text==""){
					alert("请输入内容");
				}else{
					var oList=document.getElementById("list");//获取ul对象
					var oLi=document.createElement("li");//创建li元素
					oLi.innerHTML=text;
					oLi.setAttribute("class","thisNode");//为节点增加class属性
					oList.appendChild(oLi);//将创建的li添加到ul尾部
					document.getElementById("content").value="";//清空文本框的值
					var nodeNum=document.getElementsByClassName("thisNode");
					for(var i=0;i<nodeNum.length;i++){
							nodeNum[i].onclick=function(){
							this.parentNode.removeChild(this);
						};
					}
				}
			}
			//左侧移除
			function removeFromLeft(){
				var oList=document.getElementById("list");//获取ul对象
				var nodeNum=document.getElementsByClassName("thisNode");
				oList.removeChild(nodeNum[0]);//删除第一个子元素
			}
			//右侧移除
			function removeFromRight(){
				var oList=document.getElementById("list");//获取ul对象
				var nodeNum=document.getElementsByClassName("thisNode");
				oList.removeChild(nodeNum[nodeNum.length-1]);//删除最后一个子元素
			}

			//点击队列中任何一个元素，则该元素会被从队列中删除
			var nodeNum=document.getElementsByClassName("thisNode");
			for(var i=0;i<nodeNum.length;i++){
					nodeNum[i].onclick=function(){
					this.parentNode.removeChild(this);
				};
			}
			//文本查询
			function queryFun(){
				var key=document.getElementById("key").value;
				var reg=new RegExp(key,'gi');//全局搜索不区分大小写
				var oList=document.getElementById("list");
				var nodeNum=document.getElementsByClassName("thisNode");
				for(var i=0;i<nodeNum.length;i++){
					nodeNum[i].style.background="red";//下一项查询之前恢复初始背景色
					nodeNum[i].style.color="#fff";//下一项查询之前恢复初始背景色
					if(reg.test(nodeNum[i].innerHTML)){
						nodeNum[i].style.background="#fff";
						nodeNum[i].style.color="#f00";
						nodeNum[i].style.border="1px solid #f00";
					}
				}
			}
		</script>
	</body>
</html>
